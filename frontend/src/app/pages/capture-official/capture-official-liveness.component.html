<div class="liveness-modal" 
     *ngIf="isModalOpen()" 
     [class.fadeout]="isClosing()"
     (click)="closeModal()">
  
  <!-- BotÃ£o fechar -->
  <button class="close-button" (click)="closeModal()" aria-label="Fechar modal">âœ•</button>

  <!-- Overlay de preparaÃ§Ã£o -->
  <div class="prep-overlay" *ngIf="showPreparationScreen()">
    <div class="prep-content">
      <div class="preparation-icon">ğŸ’¡</div>
      <h2>Prepare-se para a VerificaÃ§Ã£o</h2>
      <p>Centralize o rosto e aguarde.</p>
      <div class="count">{{ preparationCountdown() }}</div>
    </div>
  </div>

  <!-- Wrapper isolado do AWS -->
  <div class="liveness-aws-wrapper" *ngIf="!showPreparationScreen() && !showReviewStep()" (click)="$event.stopPropagation()">
    <div id="aws-liveness-container"></div>
    
    <!-- Overlays (nÃ£o interferem no AWS) - dentro do wrapper -->
    <div class="liveness-overlays">

    <!-- Status -->
    <div class="status-overlay" 
         [class.verifying]="isVerifying()"
         *ngIf="statusMessage() && !errorMessageSignal()">
      <span *ngIf="isVerifying()" class="spinner"></span>
      {{ statusMessage() }}
    </div>

    <!-- Gravando vÃ­deo -->
    <div class="recording-indicator" *ngIf="isRecordingVideo()">
      <div class="dot"></div>
      Gravando vÃ­deo...
    </div>

    <!-- Loading -->
    <div class="loading-overlay" *ngIf="isLoading()">
      <div class="spinner"></div>
      <p>Aguardando widget carregar...</p>
    </div>

    <!-- Erro -->
    <div class="error-overlay" *ngIf="errorMessageSignal()">
      <div class="error-box">
        <h3>Ocorreu um problema</h3>
        <p>{{ errorMessageSignal() }}</p>
        <button class="retry-btn" (click)="retry()">Tentar novamente</button>
      </div>
    </div>
  </div>

</div>
