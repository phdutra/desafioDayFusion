<div class="help-container">
  <!-- Sidebar de navega√ß√£o -->
  <aside class="help-sidebar">
    <div class="help-sidebar-header">
      <h2>üìö Documenta√ß√£o</h2>
      <p>DayFusion Security</p>
    </div>
    
    <nav class="help-nav">
      @for (section of sections(); track section.id) {
        <button 
          class="help-nav-item" 
          [class.active]="section.active"
          (click)="selectSection(section.id)">
          <span class="help-nav-icon">{{ section.icon }}</span>
          <span class="help-nav-text">{{ section.title }}</span>
        </button>
      }
    </nav>
  </aside>

  <!-- Conte√∫do principal -->
  <main class="help-content">
    <!-- Se√ß√£o: Anti-Deepfake -->
    <section id="anti-deepfake" class="help-section">
      <div class="section-header">
        <h1>üõ°Ô∏è Camada Anti-Deepfake</h1>
        <p class="section-subtitle">Autentica√ß√£o Facial de N√≠vel Fintech</p>
      </div>

      <div class="info-card info-highlight">
        <h3>üéØ Estrat√©gia de Duas Camadas</h3>
        <p>O DayFusion implementa prote√ß√£o em <strong>dois n√≠veis complementares</strong> para garantir autentica√ß√£o facial segura contra fraudes avan√ßadas:</p>
      </div>

      <div class="layers-grid">
        <div class="layer-card layer-primary">
          <div class="layer-number">1</div>
          <h3>Face Liveness (AWS Rekognition)</h3>
          <p class="layer-description">Garante que √© uma <strong>pessoa real e presente</strong></p>
          <ul class="layer-features">
            <li>‚úÖ Detecta fotos impressas</li>
            <li>‚úÖ Detecta replay de v√≠deos</li>
            <li>‚úÖ Detecta m√°scaras 3D</li>
            <li>‚úÖ Movimentos naturais em 3D</li>
            <li>‚úÖ An√°lise de profundidade facial</li>
          </ul>
        </div>

        <div class="layer-card layer-secondary">
          <div class="layer-number">2</div>
          <h3>Anti-Deepfake (IA Pr√≥pria)</h3>
          <p class="layer-description">Detecta <strong>manipula√ß√µes de v√≠deo/√°udio e artefatos generativos</strong></p>
          <ul class="layer-features">
            <li>‚úÖ Padr√µes de piscar naturais</li>
            <li>‚úÖ An√°lise de microexpress√µes</li>
            <li>‚úÖ Sincronismo √°udio-v√≠deo (lip-sync)</li>
            <li>‚úÖ Artefatos GAN/Diffusion</li>
            <li>‚úÖ Inconsist√™ncias temporais</li>
          </ul>
        </div>
      </div>

      <div class="info-card info-comparison">
        <h3>üìä Compara√ß√£o de Prote√ß√µes</h3>
        <div class="comparison-table">
          <table>
            <thead>
              <tr>
                <th>Amea√ßa</th>
                <th>Face Liveness</th>
                <th>Anti-Deepfake</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Foto impressa</td>
                <td class="status-full">‚úÖ Detecta</td>
                <td class="status-none">‚ùå N√£o detecta</td>
              </tr>
              <tr>
                <td>Replay de v√≠deo</td>
                <td class="status-full">‚úÖ Detecta</td>
                <td class="status-partial">‚ö†Ô∏è Parcial</td>
              </tr>
              <tr>
                <td>M√°scara 3D</td>
                <td class="status-full">‚úÖ Detecta</td>
                <td class="status-none">‚ùå N√£o detecta</td>
              </tr>
              <tr>
                <td>Deepfake (IA)</td>
                <td class="status-partial">‚ö†Ô∏è Parcial</td>
                <td class="status-full">‚úÖ Detecta</td>
              </tr>
              <tr>
                <td>√Åudio sint√©tico</td>
                <td class="status-none">‚ùå N√£o analisa</td>
                <td class="status-full">‚úÖ Detecta</td>
              </tr>
              <tr>
                <td>Artefatos GAN/Diffusion</td>
                <td class="status-none">‚ùå N√£o detecta</td>
                <td class="status-full">‚úÖ Detecta</td>
              </tr>
              <tr>
                <td>Lip-sync falso</td>
                <td class="status-none">‚ùå N√£o verifica</td>
                <td class="status-full">‚úÖ Detecta</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o: Fluxo de Autentica√ß√£o -->
    <section id="fluxo" class="help-section">
      <div class="section-header">
        <h1>üîÑ Fluxo de Autentica√ß√£o Completo</h1>
        <p class="section-subtitle">Pipeline de Seguran√ßa Multicamadas</p>
      </div>

      <div class="flow-diagram">
        <div class="flow-step">
          <div class="flow-step-number">1</div>
          <div class="flow-step-content">
            <h3>üìπ Captura (Frontend)</h3>
            <p>V√≠deo curto de 3-5 segundos com √°udio</p>
            <div class="flow-step-details">
              <span class="badge badge-tech">Angular 19</span>
              <span class="badge badge-tech">MediaRecorder API</span>
              <span class="badge badge-tech">WebRTC</span>
            </div>
          </div>
        </div>

        <div class="flow-arrow">‚Üì</div>

        <div class="flow-step">
          <div class="flow-step-number">2</div>
          <div class="flow-step-content">
            <h3>üß† Face Liveness 3D</h3>
            <p>Valida√ß√£o de presen√ßa real em 3D</p>
            <div class="flow-step-details">
              <span class="badge badge-aws">AWS Rekognition</span>
              <span class="badge badge-data">LivenessDecision</span>
              <span class="badge badge-data">Confidence Score</span>
            </div>
          </div>
        </div>

        <div class="flow-arrow">‚Üì</div>

        <div class="flow-step">
          <div class="flow-step-number">3</div>
          <div class="flow-step-content">
            <h3>üõ°Ô∏è Anti-Deepfake (Lambda)</h3>
            <p>An√°lise avan√ßada de artefatos e sincronismo</p>
            <div class="flow-step-details">
              <span class="badge badge-ai">TensorFlow</span>
              <span class="badge badge-ai">Hugging Face</span>
              <span class="badge badge-data">DeepfakeScore</span>
            </div>
          </div>
        </div>

        <div class="flow-arrow">‚Üì</div>

        <div class="flow-step">
          <div class="flow-step-number">4</div>
          <div class="flow-step-content">
            <h3>‚öñÔ∏è Decis√£o Final</h3>
            <p>Aplica√ß√£o de thresholds e pol√≠ticas de risco</p>
            <div class="flow-step-details">
              <span class="badge badge-decision badge-success">APROVADO</span>
              <span class="badge badge-decision badge-warning">REVIS√ÉO</span>
              <span class="badge badge-decision badge-danger">REJEITADO</span>
            </div>
          </div>
        </div>

        <div class="flow-arrow">‚Üì</div>

        <div class="flow-step">
          <div class="flow-step-number">5</div>
          <div class="flow-step-content">
            <h3>üìä Auditoria & Logs</h3>
            <p>Registro completo para compliance LGPD/ISO</p>
            <div class="flow-step-details">
              <span class="badge badge-storage">DynamoDB</span>
              <span class="badge badge-storage">S3 (lifecycle 24h)</span>
              <span class="badge badge-storage">CloudWatch</span>
            </div>
          </div>
        </div>
      </div>

      <div class="info-card info-code">
        <h3>üéØ Pol√≠tica de Decis√£o</h3>
        <pre class="code-block"><code>IF LivenessDecision != "REAL_PERSON"
  ‚Üí REJEITAR

ELSE IF DeepfakeScore >= 0.60
  ‚Üí REJEITAR (alto risco de deepfake)

ELSE IF DeepfakeScore >= 0.30 AND DeepfakeScore < 0.60
  ‚Üí ENVIAR PARA REVIS√ÉO MANUAL

ELSE
  ‚Üí APROVAR (baixo risco)</code></pre>
      </div>
    </section>

    <!-- Se√ß√£o: Face Liveness 3D -->
    <section id="face-liveness" class="help-section">
      <div class="section-header">
        <h1>üß† Face Liveness 3D (AWS Rekognition)</h1>
        <p class="section-subtitle">Valida√ß√£o de Presen√ßa Real com Profundidade 3D</p>
      </div>

      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-icon">üë§</div>
          <h3>An√°lise 3D Completa</h3>
          <p>Valida profundidade facial, movimentos naturais e caracter√≠sticas biom√©tricas em tempo real</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">üé≠</div>
          <h3>Anti-Spoofing</h3>
          <p>Detecta tentativas de fraude com fotos, v√≠deos, m√°scaras e outros artefatos f√≠sicos</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">‚ö°</div>
          <h3>Resposta R√°pida</h3>
          <p>Resultado em menos de 3 segundos com confidence score de at√© 99%</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">üîê</div>
          <h3>Certificado AWS</h3>
          <p>Tecnologia iBeta Level 1 & 2 compliant, utilizada por fintechs globais</p>
        </div>
      </div>

      <div class="info-card">
        <h3>üìà M√©tricas de Qualidade</h3>
        <div class="metrics-grid">
          <div class="metric-item">
            <span class="metric-value">‚â• 90%</span>
            <span class="metric-label">LIVE (Aprovado)</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">70-89%</span>
            <span class="metric-label">GOOD (Revis√£o)</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">50-69%</span>
            <span class="metric-label">FAIR (Suspeito)</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">< 50%</span>
            <span class="metric-label">POOR (Spoof)</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o: Compara√ß√£o Facial -->
    <section id="match" class="help-section">
      <div class="section-header">
        <h1>üéØ Compara√ß√£o Facial (Face Match)</h1>
        <p class="section-subtitle">Valida√ß√£o de Identidade por Similaridade</p>
      </div>

      <div class="match-flow">
        <div class="match-source">
          <h3>Imagem de Refer√™ncia</h3>
          <p>Foto do Liveness 3D<br/>(refer√™ncia "viva")</p>
          <div class="match-placeholder">
            <span class="match-icon">üßë</span>
            <span class="match-label">Reference.jpg</span>
          </div>
        </div>

        <div class="match-comparison">
          <div class="match-arrow">‚Üí</div>
          <span class="match-vs">VS</span>
          <div class="match-arrow">‚Üê</div>
          <div class="match-algo">
            <h4>AWS CompareFaces</h4>
            <ul>
              <li>128+ pontos faciais</li>
              <li>Embeddings vetoriais</li>
              <li>Threshold 80%</li>
            </ul>
          </div>
        </div>

        <div class="match-target">
          <h3>Documento de Identidade</h3>
          <p>RG, CNH, Passaporte<br/>(foto oficial)</p>
          <div class="match-placeholder">
            <span class="match-icon">üìÑ</span>
            <span class="match-label">Document.jpg</span>
          </div>
        </div>
      </div>

      <div class="info-card info-success">
        <h3>‚úÖ Resultado do Match</h3>
        <div class="match-result">
          <div class="result-bar">
            <div class="result-bar-fill" style="width: 93%">
              <span class="result-bar-label">93% Similaridade</span>
            </div>
          </div>
          <p class="result-message"><strong>APROVADO:</strong> Liveness = 98% + Similaridade = 93% ‚Üí Identidade confirmada</p>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o: Arquitetura & APIs -->
    <section id="api" class="help-section">
      <div class="section-header">
        <h1>‚öôÔ∏è Arquitetura & APIs</h1>
        <p class="section-subtitle">Stack Tecnol√≥gica e Endpoints</p>
      </div>

      <div class="architecture-diagram">
        <div class="arch-layer arch-frontend">
          <h3>Frontend</h3>
          <div class="arch-components">
            <span class="arch-tech">Angular 19</span>
            <span class="arch-tech">TypeScript</span>
            <span class="arch-tech">RxJS</span>
            <span class="arch-tech">Standalone Components</span>
          </div>
        </div>

        <div class="arch-arrow">‚áÖ</div>

        <div class="arch-layer arch-backend">
          <h3>Backend API</h3>
          <div class="arch-components">
            <span class="arch-tech">.NET 9</span>
            <span class="arch-tech">C# Controllers</span>
            <span class="arch-tech">Dependency Injection</span>
          </div>
        </div>

        <div class="arch-arrow">‚áÖ</div>

        <div class="arch-layer arch-aws">
          <h3>AWS Services</h3>
          <div class="arch-components">
            <span class="arch-tech">Rekognition</span>
            <span class="arch-tech">S3</span>
            <span class="arch-tech">DynamoDB</span>
            <span class="arch-tech">Lambda</span>
            <span class="arch-tech">CloudWatch</span>
          </div>
        </div>
      </div>

      <div class="api-endpoints">
        <h3>üì° Principais Endpoints</h3>
        
        <div class="endpoint-card">
          <span class="http-method http-post">POST</span>
          <code>/api/liveness/session</code>
          <p>Cria sess√£o de Face Liveness 3D</p>
        </div>

        <div class="endpoint-card">
          <span class="http-method http-get">GET</span>
          <code>/api/liveness/results?sessionId={{ '{' }}id{{ '}' }}</code>
          <p>Obt√©m resultado do Liveness (com imagens)</p>
        </div>

        <div class="endpoint-card">
          <span class="http-method http-post">POST</span>
          <code>/api/liveness/compare</code>
          <p>Compara refer√™ncia Liveness com documento</p>
        </div>

        <div class="endpoint-card">
          <span class="http-method http-post">POST</span>
          <code>/api/anti-deepfake/analyze</code>
          <p>An√°lise anti-deepfake via Lambda TF/HF</p>
        </div>

        <div class="endpoint-card">
          <span class="http-method http-post">POST</span>
          <code>/api/verify</code>
          <p>Orquestra: Liveness + Anti-Deepfake + Match</p>
        </div>

        <div class="endpoint-card">
          <span class="http-method http-get">GET</span>
          <code>/api/sessions/{{ '{' }}id{{ '}' }}</code>
          <p>Consulta auditoria de sess√£o</p>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o: Seguran√ßa -->
    <section id="seguranca" class="help-section">
      <div class="section-header">
        <h1>üîí Pol√≠ticas de Seguran√ßa</h1>
        <p class="section-subtitle">Compliance LGPD & ISO 27001</p>
      </div>

      <div class="security-grid">
        <div class="security-card">
          <div class="security-icon">üîê</div>
          <h3>Criptografia</h3>
          <ul>
            <li>TLS 1.3 em tr√¢nsito</li>
            <li>AES-256 em repouso (S3)</li>
            <li>Presigned URLs tempor√°rias</li>
          </ul>
        </div>

        <div class="security-card">
          <div class="security-icon">‚è±Ô∏è</div>
          <h3>Reten√ß√£o de Dados</h3>
          <ul>
            <li>V√≠deos: 24h (lifecycle S3)</li>
            <li>Logs de sess√£o: 90 dias</li>
            <li>Auditoria: 5 anos</li>
          </ul>
        </div>

        <div class="security-card">
          <div class="security-icon">üëÅÔ∏è</div>
          <h3>Auditoria</h3>
          <ul>
            <li>SessionId rastre√°vel</li>
            <li>Device fingerprint</li>
            <li>IP hash (SHA-256)</li>
            <li>Vers√£o de modelos</li>
          </ul>
        </div>

        <div class="security-card">
          <div class="security-icon">üõ°Ô∏è</div>
          <h3>IAM & Permiss√µes</h3>
          <ul>
            <li>Identity Pool Cognito</li>
            <li>Roles m√≠nimas (least privilege)</li>
            <li>Rota√ß√£o de credenciais</li>
          </ul>
        </div>
      </div>

      <div class="info-card info-warning">
        <h3>‚ö†Ô∏è Boas Pr√°ticas</h3>
        <ul class="best-practices">
          <li>‚úÖ <strong>Minimiza√ß√£o de dados:</strong> Capture apenas o necess√°rio (3-5s de v√≠deo)</li>
          <li>‚úÖ <strong>Consentimento expl√≠cito:</strong> Aviso antes de iniciar captura biom√©trica</li>
          <li>‚úÖ <strong>Explicabilidade:</strong> Salvar motivo da decis√£o (statusReason)</li>
          <li>‚úÖ <strong>Direito ao esquecimento:</strong> API para exclus√£o de dados biom√©tricos</li>
          <li>‚úÖ <strong>Logs sem PII:</strong> Hash de CPF/IP, pseudonimiza√ß√£o de userId</li>
        </ul>
      </div>

      <div class="info-card">
        <h3>üìã Checklist de Implementa√ß√£o</h3>
        <div class="checklist">
          <label class="checklist-item">
            <input type="checkbox" checked disabled />
            <span>Bucket S3 com versionamento e lifecycle ‚â§24h</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" checked disabled />
            <span>CORS configurado (localhost + dom√≠nios oficiais)</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" checked disabled />
            <span>Identity Pool com Rekognition Liveness + KVS WebRTC</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" checked disabled />
            <span>Tabela DynamoDB DayFusionSessions criada</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" disabled />
            <span>Lambda Anti-Deepfake (TF/HF) como container Docker</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" disabled />
            <span>Endpoints .NET implementados</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" disabled />
            <span>Captura 3-5s com √°udio no Angular</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" disabled />
            <span>M√©tricas/Alarmes no CloudWatch</span>
          </label>
          <label class="checklist-item">
            <input type="checkbox" disabled />
            <span>Documenta√ß√£o de reten√ß√£o e pol√≠ticas LGPD</span>
          </label>
        </div>
      </div>
    </section>

    <!-- Footer com contato -->
    <footer class="help-footer">
      <div class="footer-content">
        <h3>üìû Precisa de Ajuda?</h3>
        <p>Entre em contato com o DayFusion Core Team ‚Äî Seguran√ßa & Biometria</p>
        <div class="footer-links">
          <a href="#" class="footer-link">üìß Suporte T√©cnico</a>
          <a href="#" class="footer-link">üìñ Documenta√ß√£o Completa</a>
          <a href="#" class="footer-link">üîó GitHub</a>
        </div>
      </div>
    </footer>
  </main>
</div>

