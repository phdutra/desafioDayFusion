<div class="dashboard-page fade-in-up">
  <header class="page-header">
    <div>
      <h1 class="gradient-text">ğŸ“Š Dashboard</h1>
      <p class="subtitle">VisÃ£o geral do sistema de reconhecimento facial</p>
    </div>
    <button class="btn-primary" (click)="startNewCapture()">
      <span>â•</span>
      <span>Nova Captura</span>
    </button>
  </header>

  <!-- Cards de EstatÃ­sticas Principais -->
  <section class="stats-grid">
    <div class="stat-card total">
      <div class="stat-icon">ğŸ¯</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats().totalSessions }}</div>
        <div class="stat-label">Total de SessÃµes</div>
      </div>
    </div>

    <div class="stat-card approved">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats().approved }}</div>
        <div class="stat-label">Aprovados</div>
        <div class="stat-percentage">{{ stats().approvalRate | number:'1.1-1' }}%</div>
      </div>
    </div>

    <div class="stat-card rejected">
      <div class="stat-icon">âŒ</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats().rejected }}</div>
        <div class="stat-label">Rejeitados</div>
        <div class="stat-percentage">{{ stats().rejectionRate | number:'1.1-1' }}%</div>
      </div>
    </div>

    <!-- Card dinÃ¢mico para outros status (se existirem) -->
    <div class="stat-card others" *ngIf="stats().others > 0">
      <div class="stat-icon">ğŸ“‹</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats().others }}</div>
        <div class="stat-label">Outros Status</div>
      </div>
    </div>
  </section>

  <!-- GrÃ¡ficos e MÃ©tricas -->
  <section class="charts-section">
    <!-- DistribuiÃ§Ã£o por Status -->
    <div class="chart-card">
      <h3 class="chart-title">ğŸ“ˆ DistribuiÃ§Ã£o por Status</h3>
      <div class="status-distribution">
        <div 
          *ngFor="let item of stats().statusDistribution" 
          class="status-bar-wrapper">
          <div class="status-bar-header">
            <span class="status-label">
              {{ getStatusIcon(item.status) }} {{ item.status }}
            </span>
            <span class="status-count">{{ item.count }} ({{ item.percentage | number:'1.0-0' }}%)</span>
          </div>
          <div class="status-bar-track">
            <div 
              class="status-bar-fill" 
              [class]="getStatusColor(item.status)"
              [style.width.%]="item.percentage">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scores MÃ©dios -->
    <div class="chart-card">
      <h3 class="chart-title">ğŸ¯ Scores MÃ©dios</h3>
      <div class="scores-container">
        <div class="score-item">
          <div class="score-label">Liveness Score</div>
          <div class="score-value-large">{{ stats().avgLivenessScore | number:'1.1-1' }}%</div>
          <div class="score-bar">
            <div 
              class="score-bar-fill"
              [class]="getProgressColor(stats().avgLivenessScore)"
              [style.width.%]="stats().avgLivenessScore">
            </div>
          </div>
        </div>
        
        <div class="score-item">
          <div class="score-label">Face Match Score</div>
          <div class="score-value-large">
            {{ stats().avgFaceMatchScore > 0 ? (stats().avgFaceMatchScore | number:'1.1-1') + '%' : 'N/A' }}
          </div>
          <div class="score-bar" *ngIf="stats().avgFaceMatchScore > 0">
            <div 
              class="score-bar-fill"
              [class]="getProgressColor(stats().avgFaceMatchScore)"
              [style.width.%]="stats().avgFaceMatchScore">
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- DistribuiÃ§Ã£o por Faixa de Score -->
  <section class="score-ranges-section" *ngIf="stats().scoreRanges.length > 0">
    <h3 class="section-title">ğŸ“Š DistribuiÃ§Ã£o por Faixa de Score (Liveness)</h3>
    <div class="score-ranges-grid">
      <div 
        *ngFor="let range of stats().scoreRanges" 
        class="score-range-card">
        <div class="range-label">{{ range.range }}%</div>
        <div class="range-value">{{ range.count }}</div>
        <div class="range-suffix">sessÃµes</div>
      </div>
    </div>
  </section>

  <!-- SessÃµes Recentes -->
  <section class="recent-sessions-section" *ngIf="stats().recentSessions.length > 0">
    <div class="section-header">
      <h3 class="section-title">ğŸ• SessÃµes Recentes</h3>
      <button class="btn-link" (click)="viewAllHistory()">
        Ver todas â†’
      </button>
    </div>
    
    <div class="sessions-list">
      <div 
        *ngFor="let session of stats().recentSessions" 
        class="session-card"
        [class]="getStatusColor(session.status)"
        (click)="viewSession(session.sessionId)">
        <div class="session-header">
          <span class="session-icon">{{ getStatusIcon(session.status) }}</span>
          <span class="session-status">{{ session.status }}</span>
          <span class="session-date">{{ session.createdAt | date:'dd/MM/yyyy HH:mm' }}</span>
        </div>
        <div class="session-details">
          <div class="session-detail">
            <span class="detail-label">Liveness:</span>
            <span class="detail-value">{{ session.livenessScore | number:'1.0-0' }}%</span>
          </div>
          <div class="session-detail">
            <span class="detail-label">Match:</span>
            <span class="detail-value">
              {{ session.faceMatchScore ? (session.faceMatchScore | number:'1.0-0') + '%' : 'N/A' }}
            </span>
          </div>
          <div class="session-detail">
            <span class="detail-label">ID:</span>
            <span class="detail-value session-id">{{ session.sessionId }}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Estado Vazio -->
  <section class="empty-state" *ngIf="stats().totalSessions === 0">
    <div class="empty-icon">ğŸ“Š</div>
    <h3>Nenhuma sessÃ£o registrada</h3>
    <p>Comece realizando sua primeira captura facial 3D</p>
    <button class="btn-primary" (click)="startNewCapture()">
      <span>ğŸš€</span>
      <span>Iniciar Primeira Captura</span>
    </button>
  </section>
</div>

