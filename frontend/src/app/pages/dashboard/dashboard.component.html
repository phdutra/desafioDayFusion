<div class="dashboard-page fade-in-up">
  <header class="page-header">
    <div>
      <h1 class="gradient-text">ğŸ“Š Dashboard Analytics</h1>
      <p class="subtitle">VisÃ£o geral completa do sistema de reconhecimento facial 3D</p>
    </div>
    <button class="btn-primary" (click)="startNewCapture()">
      <span>â•</span>
      <span>Nova Captura</span>
    </button>
  </header>

  <!-- Cards de EstatÃ­sticas Principais com Contadores Animados -->
  <section class="stats-grid">
    <div class="stat-card total shimmer">
      <div class="stat-icon-container">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-icon-bg"></div>
      </div>
      <div class="stat-content">
        <div class="stat-value">
          {{ animatedTotalSessions() }}
        </div>
        <div class="stat-label">Total de SessÃµes</div>
        <div class="stat-trend positive">
          <span class="trend-icon">ğŸ“ˆ</span>
          <span>+12% este mÃªs</span>
        </div>
      </div>
    </div>

    <div class="stat-card approved shimmer">
      <div class="stat-icon-container">
        <div class="stat-icon">âœ…</div>
        <div class="stat-icon-bg approved-bg"></div>
      </div>
      <div class="stat-content">
        <div class="stat-value">
          {{ animatedApproved() }}
        </div>
        <div class="stat-label">Aprovados</div>
        <div class="stat-percentage">
          {{ animatedApprovalRate() | number:'1.1-1' }}%
        </div>
      </div>
    </div>

    <div class="stat-card rejected shimmer">
      <div class="stat-icon-container">
        <div class="stat-icon">âŒ</div>
        <div class="stat-icon-bg rejected-bg"></div>
      </div>
      <div class="stat-content">
        <div class="stat-value">
          {{ animatedRejected() }}
        </div>
        <div class="stat-label">Rejeitados</div>
        <div class="stat-percentage red">
          {{ animatedRejectionRate() | number:'1.1-1' }}%
        </div>
      </div>
    </div>

    <div class="stat-card avg-score shimmer">
      <div class="stat-icon-container">
        <div class="stat-icon">ğŸ–ï¸</div>
        <div class="stat-icon-bg score-bg"></div>
      </div>
      <div class="stat-content">
        <div class="stat-value">
          {{ animatedAvgScore() | number:'1.1-1' }}%
        </div>
        <div class="stat-label">Score MÃ©dio</div>
        <div class="stat-trend positive" *ngIf="stats().avgLivenessScore >= 80">
          <span class="trend-icon">â­</span>
          <span>Excelente</span>
        </div>
      </div>
    </div>
  </section>

  <!-- GrÃ¡ficos Interativos -->
  <section class="charts-section">
    <!-- GrÃ¡fico Donut - DistribuiÃ§Ã£o por Status -->
    <div class="chart-card glass-effect" *ngIf="stats().totalSessions > 0">
      <div class="chart-header">
        <h3 class="chart-title">
          <span class="chart-icon">ğŸ“Š</span>
          DistribuiÃ§Ã£o por Status
        </h3>
        <span class="chart-badge">Geral</span>
      </div>
      <apx-chart
        [series]="donutChartOptions.series!"
        [chart]="donutChartOptions.chart!"
        [labels]="donutChartOptions.labels!"
        [colors]="donutChartOptions.colors!"
        [legend]="donutChartOptions.legend!"
        [plotOptions]="donutChartOptions.plotOptions!"
        [dataLabels]="donutChartOptions.dataLabels!"
        [tooltip]="donutChartOptions.tooltip!"
        [responsive]="donutChartOptions.responsive!">
      </apx-chart>
    </div>

    <!-- GrÃ¡fico Radial - Taxa de AprovaÃ§Ã£o -->
    <div class="chart-card glass-effect" *ngIf="stats().totalSessions > 0">
      <div class="chart-header">
        <h3 class="chart-title">
          <span class="chart-icon">ğŸ¯</span>
          Taxa de AprovaÃ§Ã£o
        </h3>
        <span class="chart-badge success">Alta</span>
      </div>
      <apx-chart
        [series]="radialChartOptions.series!"
        [chart]="radialChartOptions.chart!"
        [plotOptions]="radialChartOptions.plotOptions!"
        [fill]="radialChartOptions.fill!"
        [stroke]="radialChartOptions.stroke!"
        [labels]="radialChartOptions.labels!"
        [colors]="radialChartOptions.colors!">
      </apx-chart>
    </div>
  </section>

  <!-- GrÃ¡fico de Linha - EvoluÃ§Ã£o dos Scores -->
  <section class="full-width-section" *ngIf="stats().recentSessions.length > 0">
    <div class="chart-card glass-effect">
      <div class="chart-header">
        <h3 class="chart-title">
          <span class="chart-icon">ğŸ“ˆ</span>
          EvoluÃ§Ã£o dos Scores (Ãšltimas 10 SessÃµes)
        </h3>
        <span class="chart-badge info">TendÃªncia</span>
      </div>
      <apx-chart
        [series]="lineChartOptions.series!"
        [chart]="lineChartOptions.chart!"
        [stroke]="lineChartOptions.stroke!"
        [colors]="lineChartOptions.colors!"
        [xaxis]="lineChartOptions.xaxis!"
        [yaxis]="lineChartOptions.yaxis!"
        [grid]="lineChartOptions.grid!"
        [legend]="lineChartOptions.legend!"
        [dataLabels]="lineChartOptions.dataLabels!"
        [tooltip]="lineChartOptions.tooltip!">
      </apx-chart>
    </div>
  </section>

  <!-- GrÃ¡fico de Barras - Faixas de Score -->
  <section class="full-width-section" *ngIf="stats().scoreRanges.length > 0">
    <div class="chart-card glass-effect">
      <div class="chart-header">
        <h3 class="chart-title">
          <span class="chart-icon">ğŸ“Š</span>
          DistribuiÃ§Ã£o por Faixa de Score (Liveness)
        </h3>
        <span class="chart-badge warning">AnÃ¡lise</span>
      </div>
      <apx-chart
        [series]="barChartOptions.series!"
        [chart]="barChartOptions.chart!"
        [plotOptions]="barChartOptions.plotOptions!"
        [dataLabels]="barChartOptions.dataLabels!"
        [xaxis]="barChartOptions.xaxis!"
        [yaxis]="barChartOptions.yaxis!"
        [colors]="barChartOptions.colors!"
        [fill]="barChartOptions.fill!"
        [grid]="barChartOptions.grid!"
        [tooltip]="barChartOptions.tooltip!">
      </apx-chart>
    </div>
  </section>

  <!-- SessÃµes Recentes com Design Aprimorado -->
  <section class="recent-sessions-section" *ngIf="stats().recentSessions.length > 0">
    <div class="section-header">
      <div>
        <h3 class="section-title">
          <span class="section-icon">ğŸ•</span>
          Atividade Recente
        </h3>
        <p class="section-subtitle">Ãšltimas verificaÃ§Ãµes realizadas</p>
      </div>
      <button class="btn-link" (click)="viewAllHistory()">
        Ver todas
        <span class="arrow">â†’</span>
      </button>
    </div>
    
    <div class="sessions-list">
      <div 
        *ngFor="let session of stats().recentSessions; let i = index" 
        class="session-card glass-effect"
        [class]="getStatusColor(session.status)"
        (click)="viewSession(session.sessionId)"
        [style.animation-delay.ms]="i * 50">
        <div class="session-left">
          <div class="session-icon-wrapper" [class]="getStatusColor(session.status)">
            <span class="session-icon">{{ getStatusIcon(session.status) }}</span>
          </div>
          <div class="session-info">
            <div class="session-header-info">
              <span class="session-status">{{ session.status }}</span>
              <span class="session-badge" [class]="getStatusColor(session.status)">
                {{ session.status }}
              </span>
            </div>
            <div class="session-date">
              <span class="date-icon">ğŸ“…</span>
              {{ session.createdAt | date:'dd/MM/yyyy HH:mm' }}
            </div>
          </div>
        </div>
        
        <div class="session-details">
          <div class="session-detail liveness-detail">
            <div class="detail-icon">ğŸ”</div>
            <div class="detail-content">
              <span class="detail-label">Liveness</span>
              <span class="detail-value">{{ session.livenessScore | number:'1.0-0' }}%</span>
              <div class="mini-progress">
                <div class="mini-progress-bar" 
                     [class]="getProgressColor(session.livenessScore)"
                     [style.width.%]="session.livenessScore">
                </div>
              </div>
            </div>
          </div>
          
          <div class="session-detail match-detail" *ngIf="session.faceMatchScore">
            <div class="detail-icon">ğŸ‘¤</div>
            <div class="detail-content">
              <span class="detail-label">Face Match</span>
              <span class="detail-value">{{ session.faceMatchScore | number:'1.0-0' }}%</span>
              <div class="mini-progress">
                <div class="mini-progress-bar" 
                     [class]="getProgressColor(session.faceMatchScore)"
                     [style.width.%]="session.faceMatchScore">
                </div>
              </div>
            </div>
          </div>
          
          <div class="session-detail id-detail">
            <div class="detail-icon">ğŸ”‘</div>
            <div class="detail-content">
              <span class="detail-label">Session ID</span>
              <span class="detail-value session-id">{{ session.sessionId }}</span>
            </div>
          </div>
        </div>
        
        <div class="session-arrow">
          <span>â€º</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Estado Vazio -->
  <section class="empty-state" *ngIf="stats().totalSessions === 0">
    <div class="empty-icon">ğŸ“Š</div>
    <h3>Nenhuma sessÃ£o registrada</h3>
    <p>Comece realizando sua primeira captura facial 3D</p>
    <button class="btn-primary" (click)="startNewCapture()">
      <span>ğŸš€</span>
      <span>Iniciar Primeira Captura</span>
    </button>
  </section>
</div>

