<div class="liveness-container">
  <header class="liveness-header">
    <div>
      <h2>Face Liveness 3D</h2>
      <p>Capture autom√°tica com instru√ß√µes de voz e sincroniza√ß√£o AWS.</p>
    </div>
    <div class="session-status" [class.running]="isRunning" [class.error]="errorMessage">
      <span class="status-indicator"></span>
      <span>{{ isRunning ? 'Em execu√ß√£o' : errorMessage ? 'Erro' : 'Aguardando' }}</span>
    </div>
  </header>

<section class="video-section">
  <div class="video-circle">
    <div class="progress-ring">
      <span
        class="ring-segment"
        *ngFor="let segment of ringSegments"
        [style.transform]="segment.rotation"
        [class.active]="segment.active">
      </span>
    </div>

    <div class="video-mask">
      <video #videoElement autoplay playsinline muted></video>
      <div class="guides">
        <span class="guide vertical"></span>
        <span class="guide horizontal"></span>
      </div>
      <div class="progress-indicator" *ngIf="progress > 0">
        {{ progress }}%
      </div>
    </div>
  </div>

  <div class="video-overlay" *ngIf="!isRunning && progress === 0">
    <span class="overlay-icon">üîê</span>
    <p>Pronto para iniciar a verifica√ß√£o 3D.</p>
    <p class="overlay-hint">Clique em "Iniciar Verifica√ß√£o" e siga as instru√ß√µes.</p>
  </div>
</section>

  <section class="status-section" *ngIf="statusMessage || errorMessage">
    <div class="status-message" [class.error]="errorMessage">
      <span class="status-icon">{{ errorMessage ? '‚ö†Ô∏è' : '‚úÖ' }}</span>
      <div>
        <p>{{ errorMessage ?? statusMessage }}</p>
      </div>
    </div>
  </section>

  <div class="progress-wrapper" *ngIf="progress > 0">
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="progress"></div>
    </div>
    <span class="progress-value">{{ progress }}%</span>
  </div>

  <footer class="actions">
    <button class="btn primary" (click)="startSession()" [disabled]="isRunning">
      <span>‚ñ∂</span>
      Iniciar Verifica√ß√£o
    </button>
    <button class="btn secondary" (click)="cancelSession()" *ngIf="isRunning">
      <span>‚èπ</span>
      Cancelar
    </button>
  </footer>
</div>

